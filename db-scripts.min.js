var dbNames="Academic Search Complete;ACLS Humanities E-Book;America: History and Life with Full Text;Artstor;Auto Repair Reference Center;BIR Entertainment;Book Index with Reviews;Business Source Complete;CINAHL Plus with Full Text;Communication & Mass Media Complete;Consumer Health Complete;CountryWatch;CQ Researcher;CRC Handbook of Chemistry and Physics;Criminal Justice Abstracts with Full Text;eBook Collection;Ebooks;EBSCO;Education Research Complete;Environment Complete;ERIC;Explora;Films on Demand;Gale;Gale Virtual Reference Library;Google Scholar;GreenFILE;Grove Art Online;Health Source: Consumer Edition;Health Source: Nursing/Academic Edition;International Bibliography of Theatre & Dance with Full Text;JSTOR;Kanopy;LexisNexis Academic;Library, Information Science & Technology Abstracts;Literary Reference Center Plus;MasterFILE Premier;MEDLINE;Military & Government Collection;Naxos Music Library;Naxos Music Library Jazz Collection;News;Newspaper Source Plus;OneSearch;Opposing Viewpoints in Context;Oxford Art Online;Oxford English Dictionary;PsycARTICLES;Psychology & Behavioral Sciences Collection;PubMed;Regional Business News;Rehabilitation Reference Center;Religion & Philosophy Collection;RCL;Resources for College Libraries;Safari Books Online;Salem Press;Small Business Reference Center;ScienceDirect;Scholarly Journals;SocINDEX with Full Text;Statista;Trade Publications;Video".split(";");
function showDBNos(){var a=$("#main .db-name:visible").length,c=$("#show-db-no");70>a?(dbNoS=a.toString(),$("#db-no").text(dbNoS),1===a&&c.html(c.html().replace("Databases","Database")),c.attr("class","show")):c.attr("class","hidden").attr("aria-hidden","true")}
function defaultAuto(a){a.autocomplete({source:function(a,d){$.getJSON({url:"https://widgets.ebscohost.com/prod/simplekey/autocomplete/autocomp.php",data:{q:encodeURIComponent(a.term)}}).done(function(a){a=JSON.parse(a);var c=[];a=$.map(a,function(a,c){return[a]})[2];for(var f=0;f<a.length;f++)c.push(a[f].term),d(c)}).fail(function(a,c,d){ga("send","event","eds autosuggest","error",d)})},select:function(c,d){d.item&&a.val(d.item.value);$("#multi-search").submit()}})}
$(function(){defaultAuto($("#dbpage-query"));$(".db-name").each(function(){$(this).text($(this).text().replace("Acls","ACLS").replace("Cinahl","CINAHL").replace("Cq","CQ").replace("Crc","CRC").replace("Ebook Coll","eBook Coll").replace("Eric","ERIC").replace("Medline","MEDLINE"))});var a=$("#main-nav"),c=$("#nav-label");781>$(window).width()&&a.addClass("hidden");c.on("click",function(){a.toggleClass("hidden")});$(".category").each(function(){var a=$(this);a.removeClass("active hidden");a.find("li").hasClass("active")?
a.addClass("active"):a.addClass("hidden")});checkZeros();$("dt").prev("dd").addClass("last-dd");$("#trial-dbs .db-desc").each(function(){var a=$(this),c=a.html(),g=$.trim(c).substring(0,60).split(" ").slice(0,-1).join(" ")+'... <button class="trial-desc-exp" type="button">more</button>';a.html(g);a.show();$(".trial-desc-exp").on("click",function(){$(this).parent().html(c)})})});$("#dbpage-query").on("focus",function(){showSearch($("#form-remainder"),$(this))});
$(".alpha").each(function(){0===$(this).find("li").length&&$(this).addClass("hidden")});function checkZeros(){if(!$(".problem-description").length&&!$("#main .special").length&&($("#zero-notice").remove(),0===$("#main .active").length)){var a=$("#main");a.append('<div id="zero-notice">There are no databases fitting the criteria you indicated. Sorry!</div>');a.append($("#multi-search"));$("#dbpage-query").addClass("form-emphasis");$("#form-remainder").removeClass("hidden")}}
function showSearch(a,c){c.addClass("form-emphasis");a.slideDown().removeClass("hidden");$("#form-closer").on("click",function(d){d.preventDefault();hideSearch(a,c)})}function hideSearch(a,c){a.slideUp().addClass("hidden");c.removeClass("form-emphasis");c.on("click",function(){showSearch(a,c)})}$("#main-nav li a").each(function(){var a=$("#title-cat").text(),c=$("#title-alpha").text().toLowerCase(),d=$(this),f=d.text();a!==f&&c!==f||d.addClass("current")});
$(".format-links").each(function(){var a=$(this);a.find("a").text()===$("#title-format").text()&&a.addClass("current")});
$("#multi-search input[type=radio]").on("click",function(){var a=$("#multi-search");$(".search-exp").each(function(){e=$(this);e.hasClass("hidden")||e.slideUp().addClass("hidden")});var c=$(this),d=$("#dbpage-query");checkCookies();"yes"===getCookie("newWindowLinks")&&a.attr("target","_blank");c.is("#search-db")?(a.removeAttr("target"),d.autocomplete({source:function(a,c){var d=new RegExp("^"+$.ui.autocomplete.escapeRegex(a.term),"i");c($.grep(dbNames,function(a){return d.test(a)}))},select:function(c,
g){g.item&&d.val(g.item.value);a.submit()}})):defaultAuto(d);c.parent().next().slideDown().removeClass("hidden")});$(".db-name").on("click",function(){"_blank"!==$(this).attr("target")&&$("#loader").removeClass("hidden");var a=$(this).text();ga("send","event","databases","click",a)});$("#subject-nav a").on("click",function(){ga("send","event","navigation","limit","subject")});$("#alpha-nav a").on("click",function(){ga("send","event","navigation","limit","alpha")});
$("#show-all").on("click",function(){ga("send","event","button","click","show all")});$(".format-links a").on("click",function(){ga("send","event","navigation","limit","type")});$("#pubfinder a").on("click",function(){ga("send","event","link","click","Publication Finder")});$("#type-filter button").on("click",function(){var a=$(this).text();ga("send","event","filters","click",a)});$("#dbpage-query").on("focus",function(){ga("send","event","search form","activate")});
$("#multi-search").on("submit",function(){var a=$('input[name="search-type"]:checked').val(),c=$("#dbpage-query").val();ga("send","event","search","submit - "+a,c)});function setCookie(a,c,d){if(null===d)d="";else{var f=new Date;f.setTime(f.getTime()+864E5*d);d="expires="+f.toUTCString()+"; "}document.cookie=a+"="+c+"; "+d+"path=/;domain=losrios.edu"}$(".headnav a, #choose-library button").on("click",function(){var a=$(this).text().toLowerCase();setCookie("homeLibrary",a,10)});
function getCookie(a){a+="=";for(var c=document.cookie.split(";"),d=0;d<c.length;d++){for(var f=c[d];" "==f.charAt(0);)f=f.substring(1);if(0===f.indexOf(a))return f.substring(a.length,f.length)}return""}
function homeLibEls(a){var c,d,f;switch(a){case "arc":c="amerriv";d="240535";f="a";break;case "scc":c="sacram";d="106093";f="s";break;case "crc":c="cosum";d="237206";f="c";break;case "flc":c="ns015092";d="237742";f="f";break;default:c=""}$("#"+a+"-link").addClass("homelib");$.get("help/"+a+".php",function(a){$("#library-help-content").html(a)},"html");var g=a.toUpperCase();$("#library-help h2").html("From the "+g+" Library");$("#pubfinder a").attr("href","http://search.ebscohost.com/login.aspx?authtype=ip,guest&direct=true&custid="+
c+"&db=edspub&groupid=main&profile=eds&plp=1");$(".db-entry").each(function(){var a=$(this);a.data("college")&&-1===a.data("college").indexOf(f)&&a.hide()});$(".db-name:contains(Films on Demand)").attr("href","http://0-fod.infobase.com.lasiii.losrios.edu/PortalPlayLists.aspx?wid="+d);setTimeout(function(){$("#library-help-content a").on("click",function(){var c=$(this);c.text().length?c=c.text():c.find("img").length?(b=c.find("img"),c=b.attr("alt").length?b.attr("alt"):""):c="";ga("send","event",
""+a+" box","click",c)})},800);showDBNos()}
function checkCookies(a){"homeLibrary"===a?(a=getCookie(a),"arc"===a?homeLibEls("arc"):"scc"===a?homeLibEls("scc"):"crc"===a?homeLibEls("crc"):"flc"===a?homeLibEls("flc"):$.get("help/unknown.php",function(a){$("#library-help-content").html(a)},"html"),console.log(a)):"newWindowLinks"===a?"yes"===getCookie(a)&&($("#newwin-check").prop("checked",!0),$(".db-name, .headnav a, #pubfinder a, #multi-search").attr("target","_blank"),setTimeout(function(){$("#library-help-content a").attr("target","_blank")},
1E3)):"lrGAOptOut"===a&&"y"===getCookie(a)&&($("#ga-status").prepend(" You have opted out of tracking. "),a=$("#ga-opt-out"),a.html(a.html().replace(" &amp; opt out","")))}
$("#newwin-check").on("click",function(){var a=$(this),c=$(".db-name, .search-one-db, #library-help-content a, .headnav a, #pubfinder a");a.is(":checked")?(setCookie("newWindowLinks","yes",30),c.attr("target","_blank"),$("#search-db").prop("checked",!1)&&$("#multi-search").attr("target","_blank")):(setCookie("newWindowLinks","no",1),c.removeAttr("target"),$("#multi-search").removeAttr("target"))});checkCookies("homeLibrary");checkCookies("newWindowLinks");checkCookies("lrGAOptOut");
$("#choose-library button").on("click",function(){$('script[src*="libraryh3lp"]').remove();$(".zopim").remove();$(".db-entry").show();var a=$(this).text();homeLibEls(a)});var currentURL=location.href;currentURL.match("college=")&&(currentURL=currentURL.replace(/(\?|&)college.*/,""),replaceURL=currentURL.replace(/.*losrios.edu\//,""),history.replaceState(currentURL,document.title,currentURL));
$(".open-db-search").on("click",function(){var a=$(this),c="";"yes"===getCookie("newWindowLinks")&&(c=' target="_blank" ');var d=a.nextAll("h3").find(".db-name"),f=d.text(),g=f.toLowerCase(),g=g.replace(/ /g,"-"),k=a.nextAll("h3").find(".vendor").text().toLowerCase(),k=k.replace(/[\(\):]/g,""),k=k.replace(/ /g,"-"),l=document.getElementById(g);$(".open-db-search").removeClass("hidden");var h=$(".search-one-db");l?(a.addClass("hidden"),h.hide(),a.next(h).fadeIn(),document.getElementById(g).focus()):
(h.hide(),d=d.attr("href"),l="",-1<d.indexOf("ehost")&&(l='<input type="hidden" name="ehost" value="'+d.split(/[= ]+/).pop()+'">'),c="<form onsubmit=\"ga('send', 'event', 'quick search', 'submit', '"+f+'\');" class="search-one-db" method="post" action="search-db.php" '+c+'><label class="search-one-db-l" for="'+g+'">Search '+f+'</label><input name="query" id="'+g+'" type="text"><input type="hidden" name="vendor" value="'+k+'"><input type="hidden" name="db-name" value="'+g+'">'+l+'<button class="search-btn" type="submit"><img height="16" width="16" src="search.png" alt="search"></button></form>',
a.addClass("hidden"),a.after(c),a.next(h).fadeIn(),a.next(h).find(":text").focus())});$("#ga-opt-out").on("click",function(a){a.preventDefault();var c=screen.availHeight;a=.7*c;var c=.15*c,d=screen.width/2-350,f=$(this).attr("href");window.open(f,"optOut","height="+a+", width=700, menubar=no, left="+d+", top="+c+"").focus()});$("#remove-proxy").on("click",function(){removeProxy();setCookie("dbProxy","removed",null)});var proxySet=getCookie("dbProxy");"removed"===proxySet&&removeProxy();
function removeProxy(){$(".db-name").each(function(){var a=$(this).attr("href");if(-1<a.indexOf("//0-")){var d=a.replace("//0-","//");-1<a.indexOf("https")&&(a=d.split(".edu/"),a[0]=a[0].replace(/\-/g,".").replace(/$/,".edu/"),d=a.join(""),console.log(d));d=d.replace(".lasiii.losrios.edu","");$(this).attr("href",d)}});var a=$("#proxy");$("#remove-proxy").attr("id","add-proxy").html("&#8635; Restore proxy string to URLs");$('<p class="special">Proxy string has been removed from URLs; databases may not be accessible.</p>').hide().prependTo(a).fadeIn();
$("#add-proxy").on("click",function(){setCookie("dbProxy","restored",null);a.find("p").remove();a.fadeOut("fast");location.reload()})};