function showDBNos(){var a=$("#main .db-name:visible").length,c=$("#show-db-no");70>a?(dbNoS=a.toString(),$("#db-no").text(dbNoS),1===a&&c.html(c.html().replace("Databases","Database")),c.attr("class","show")):c.attr("class","hidden").attr("aria-hidden","true")}
function defaultAuto(a,c){a.autocomplete({source:function(a,c){$.getJSON({url:"https://widgets.ebscohost.com/prod/simplekey/autocomplete/autocomp.php",data:{q:encodeURIComponent(a.term)}}).done(function(a){a=JSON.parse(a);var d=[];a=$.map(a,function(a){return[a]})[2];for(var e=0;e<a.length;e++)d.push(a[e].term),c(d)}).fail(function(a,c,d){ga("send","event","eds autosuggest","error",d)})},select:function(d,e){e.item&&a.val(e.item.value);"quick"!==c?submitSearch(a.val()):a.closest("form").submit()}})}
$("#multi-search").on("submit",function(a){a.preventDefault();submitSearch($("#dbpage-query").val())});
function submitSearch(a){ga("send","event","search","submit",a);!0===/ebsco$|proquest|academic search complete|films on demand|cinahl|j( )?stor|ethnologue|lex[ui]s(( )?nex[iu]s)?|nexis|gale virtual|gvrl|^cq|onesearch|oxford art|^grove|artstor|ebooks|google scholar|business source|statista|opposing viewpoints|socindex|psycarticles|^eric$|education research complete|greenfile|intelecom|pubmed|medline|naxos|oxford english|oed|rcl|resources for college|science( )?direct|kanopy/i.test(a)?(console.log("found match"),
location.href="index.php?az&query="+encodeURIComponent(a)):(a="https://0-search-ebscohost-com.lasiii.losrios.edu/login.aspx?authtype=ip,uid&direct=true&profile=eds&bquery="+encodeURIComponent(a)+"&site=eds-live&scope=site","yes"===getCookie("newWindowLinks")?window.open(a):location.href=a)}
$(function(){defaultAuto($("#dbpage-query"));$(".db-name").each(function(){$(this).text($(this).text().replace("Acls","ACLS").replace("Cinahl","CINAHL").replace("Cq","CQ").replace("Crc","CRC").replace("Ebook Coll","eBook Coll").replace("Eric","ERIC").replace("Medline","MEDLINE"))});var a=$("#main-nav"),c=$("#nav-label");781>$(window).width()&&a.addClass("hidden");c.on("click",function(){a.toggleClass("hidden")});$(".category").each(function(){var a=$(this);a.removeClass("active hidden");a.find("li").hasClass("active")?
a.addClass("active"):a.addClass("hidden")});checkZeros();$("dt").prev("dd").addClass("last-dd");$("#trial-dbs .db-desc").each(function(){var a=$(this),c=a.html(),f=$.trim(c).substring(0,60).split(" ").slice(0,-1).join(" ")+'... <button class="trial-desc-exp" type="button">more</button>';a.html(f);a.show();$(".trial-desc-exp").on("click",function(){$(this).parent().html(c)})})});
$("#dbpage-query").on("focus",function(){var a=$(this),c=$("#form-remainder");showSearch(c,a);$("html").on("click",function(d){$(d.target).parents("#multi-search").length||c.hasClass("hidden")||hideSearch(c,a)})});$(".alpha").each(function(){0===$(this).find("li").length&&$(this).addClass("hidden")});
function checkZeros(){if(!$(".problem-description").length&&!$("#main .special").length&&($("#zero-notice").remove(),0===$("#main .active").length)){var a=$("#main");a.append('<div id="zero-notice">There are no databases fitting the criteria you indicated. Sorry!</div>');a.append($("#multi-search"));$("#dbpage-query").addClass("form-emphasis");$("#form-remainder").removeClass("hidden")}}
function showSearch(a,c){c.addClass("form-emphasis");a.slideDown().removeClass("hidden");$("#dbpage-query-submit").removeClass("hidden");$("#form-closer").on("click",function(d){d.preventDefault();hideSearch(a,c)})}function hideSearch(a,c){$("#dbpage-query-submit").addClass("hidden");a.slideUp().addClass("hidden");c.removeClass("form-emphasis");c.on("click",function(){showSearch(a,c)})}
$("#main-nav li a").each(function(){var a=$("#title-cat").text(),c=$("#title-alpha").text().toLowerCase(),d=$(this),e=d.text();a!==e&&c!==e||d.addClass("current")});$(".format-links").each(function(){var a=$(this);a.find("a").text()===$("#title-format").text()&&a.addClass("current")});$(".db-name").on("click",function(){"_blank"!==$(this).attr("target")&&$("#loader").removeClass("hidden");var a=$(this).text();ga("send","event","databases","click",a)});
$("#subject-nav a").on("click",function(){ga("send","event","navigation","limit","subject")});$("#alpha-nav a").on("click",function(){ga("send","event","navigation","limit","alpha")});$("#show-all").on("click",function(){ga("send","event","button","click","show all")});$(".format-links a").on("click",function(){ga("send","event","navigation","limit","type")});$("#pubfinder a").on("click",function(){ga("send","event","link","click","Publication Finder")});
$("#type-filter button").on("click",function(){var a=$(this).text();ga("send","event","filters","click",a)});$("#dbpage-query").on("focus",function(){ga("send","event","search form","activate")});function setCookie(a,c,d){if(null===d)d="";else{var e=new Date;e.setTime(e.getTime()+864E5*d);d="expires="+e.toUTCString()+"; "}document.cookie=a+"="+c+"; "+d+"path=/;domain=losrios.edu"}
$(".headnav a, #choose-library button").on("click",function(){var a=$(this).text().toLowerCase();setCookie("homeLibrary",a,10)});function getCookie(a){a+="=";for(var c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1);if(0===e.indexOf(a))return e.substring(a.length,e.length)}return""}
function homeLibEls(a){var c={arc:{cust:"amerriv",fod:"240535",singleCol:"a"},crc:{cust:"cosum",fod:"237206",singleCol:"c"},flc:{cust:"ns015092",fod:"237742",singleCol:"f"},scc:{cust:"sacram",fod:"106093",singleCol:"s"}};$("#"+a+"-link").addClass("homelib");$.get("help/"+a+".php",function(a){$("#library-help-content").html(a)},"html");var d=a.toUpperCase();$("#library-help h2").html("From the "+d+" Library");$("#pubfinder a").attr("href","https://search.ebscohost.com/login.aspx?authtype=ip,guest&direct=true&custid="+
c[a].cust+"&db=edspub&groupid=main&profile=eds&plp=1");$(".db-entry").each(function(){var d=$(this);d.data("college")&&-1===d.data("college").indexOf(c[a].singleCol)&&d.hide()});$(".db-name:contains(Films on Demand)").attr("href","http://0-fod.infobase.com.lasiii.losrios.edu/PortalPlayLists.aspx?wid="+c[a].fod);setTimeout(function(){$("#library-help-content a").on("click",function(){var c=$(this);c.text().length?c=c.text():c.find("img").length?(b=c.find("img"),c=b.attr("alt").length?b.attr("alt"):
""):c="";ga("send","event",""+a+" box","click",c)})},800);showDBNos()}
function checkCookies(a){"homeLibrary"===a?((a=getCookie(a))?homeLibEls(a):($.get("help/unknown.php",function(a){$("#library-help-content").html(a)},"html"),showDBNos()),console.log(a)):"newWindowLinks"===a?"yes"===getCookie(a)&&($("#newwin-check").prop("checked",!0),$(".db-name, .headnav a, #pubfinder a, #multi-search").attr("target","_blank"),setTimeout(function(){$("#library-help-content a").attr("target","_blank")},1E3)):"lrGAOptOut"===a&&"y"===getCookie(a)&&($("#ga-status").prepend(" You have opted out of tracking. "),
a=$("#ga-opt-out"),a.html(a.html().replace(" &amp; opt out","")))}$("#newwin-check").on("click",function(){var a=$(this),c=$(".db-name, .search-one-db, #library-help-content a, .headnav a, #pubfinder a");a.is(":checked")?(setCookie("newWindowLinks","yes",30),c.attr("target","_blank"),$("#search-db").prop("checked",!1)&&$("#multi-search").attr("target","_blank")):(setCookie("newWindowLinks","no",1),c.removeAttr("target"),$("#multi-search").removeAttr("target"))});checkCookies("homeLibrary");checkCookies("newWindowLinks");
checkCookies("lrGAOptOut");$("#choose-library button").on("click",function(){$('script[src*="libraryh3lp"]').remove();$(".zopim").remove();$(".db-entry").show();var a=$(this).text();homeLibEls(a)});var currentURL=location.href;currentURL.match("college=")&&(currentURL=currentURL.replace(/(\?|&)college.*/,""),replaceURL=currentURL.replace(/.*losrios.edu\//,""),history.replaceState(currentURL,document.title,currentURL));
$(".open-db-search").on("click",function(){var a=$(this),c="";"yes"===getCookie("newWindowLinks")&&(c=' target="_blank" ');var d=a.nextAll("h3").find(".db-name"),e=d.text(),f=e.toLowerCase();f=f.replace(/ /g,"-");var g=a.nextAll("h3").find(".vendor").text().toLowerCase();g=g.replace(/[\(\):]/g,"");g=g.replace(/ /g,"-");var k=document.getElementById(f);$(".open-db-search").removeClass("hidden");var h=$(".search-one-db");k?(a.addClass("hidden"),h.hide(),a.next(h).fadeIn(),document.getElementById(f).focus()):
(h.hide(),d=d.attr("href"),k="",-1<d.indexOf("ehost")&&(k='<input type="hidden" name="ehost" value="'+d.split(/[= ]+/).pop()+'">'),c="<form onsubmit=\"ga('send', 'event', 'quick search', 'submit', '"+e+'\');" class="search-one-db" method="post" action="search-db.php" '+c+'><label class="search-one-db-l" for="'+f+'">Search '+e+'</label><input name="query" id="'+f+'" type="text"><input type="hidden" name="vendor" value="'+g+'"><input type="hidden" name="db-name" value="'+f+'">'+k+'<button class="search-btn" type="submit"><img height="16" width="16" src="search.png" alt="search"></button></form>',
a.addClass("hidden"),a.after(c),a.next(h).fadeIn(),a=a.next(h).find(":text"),a.focus(),defaultAuto(a,"quick"))});$("#ga-opt-out").on("click",function(a){a.preventDefault();var c=screen.availHeight;a=.7*c;c*=.15;var d=screen.width/2-350,e=$(this).attr("href");window.open(e,"optOut","height="+a+", width=700, menubar=no, left="+d+", top="+c+"").focus()});$("#remove-proxy").on("click",function(){removeProxy();setCookie("dbProxy","removed",null)});var proxySet=getCookie("dbProxy");
"removed"===proxySet&&removeProxy();
function removeProxy(){$(".db-name").each(function(){var a=$(this).attr("href");if(-1<a.indexOf("//0-")){var d=a.replace("//0-","//");-1<a.indexOf("https")&&(a=d.split(".edu/"),a[0]=a[0].replace(/\-/g,".").replace(/$/,".edu/"),d=a.join(""),console.log(d));d=d.replace(".lasiii.losrios.edu","");$(this).attr("href",d)}});var a=$("#proxy");$("#remove-proxy").attr("id","add-proxy").html("&#8635; Restore proxy string to URLs");$('<p class="special">Proxy string has been removed from URLs; databases may not be accessible.</p>').hide().prependTo(a).fadeIn();$("#add-proxy").on("click",
function(){setCookie("dbProxy","restored",null);a.find("p").remove();a.fadeOut("fast");location.reload()})};